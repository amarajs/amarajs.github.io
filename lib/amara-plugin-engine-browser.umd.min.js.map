{"version":3,"sources":["amara-plugin-engine-browser.umd.js"],"names":["global","factory","exports","module","define","amd","AmaraBrowser","this","action","type","payload","without","lhs","rhs","difference","Set","forEach","delete","setHas","node","result","set","has","equals","context","size","addOrUpdate","key","ref","map","value","get","add","overwriteWith","targets","feature","overwrite","clear","AmaraPluginEngineBrowser","dispatch","gatherAttributes","attr","attrs","attrIndex","target","targetIndex","length","match","rxAttribute","slice","attributes","updateWatchedAttributes","subset","before","observeDOMChanges","removeTargetsFromFeatures","nodes","featureTargets","handleRemovedTargets","removed","targetFeatures","Array","from","populateFeatureTargets","selector","join","root","querySelectorAll","matches","dispatchEmptyApplyResult","Map","handleNewlyEmptyFeatures","currTargets","old","populateApplyQueue","prevTargets","featuresToApply","previous","updateFeatureTargets","features","onPopulateFeatureTargets","queue","push","onMutationOccurred","mutationRecords","mutationRecord","index","removedNodes","filter","observer","disconnect","window","MutationObserver","observe","subtree","childList","attributeFilter","onBootstrap","onFeaturesAdded","added","isSameTypeFeatureWithTargets","feat","currT","addFeaturesOfSameType","addCurrentTargets"],"mappings":"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","file":"amara-plugin-engine-browser.umd.min.js"}