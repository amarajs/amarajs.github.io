{"version":3,"sources":["amara-plugin-router.umd.js"],"names":["global","factory","exports","module","define","amd","AmaraRouter","this","copy","key","value","object","undefined","result","merge","objects","len","arguments","length","index","Object","create","keys","forEach","zip","values","i","attempt","fn","ctx","args","apply","e","decodeValue","parsed","val","decodeURIComponent","rxISODate","test","Date","rxJSON","JSON","parse","getType","call","Types","Error","slash","str","replace","rxInvalidChars","splitBy","split","String","substring","Number","encodeValue","ref","params","parts","pre","encodeURIComponent","Nil","Undef","Bool","push","Array","stringify","toISOString","encodeQueryString","context","sort","join","createParamsMap","out","createHashMethods","hashDelimiters","rxSelectorUrl","getHashPart","path","match","slice","target","url","ref$1","rxPathQS","route","QS","map","filter","keyExists","reduce","getHashData","hash","hashPrefix","selectorBetween","Boolean","encodeHashPart","qs","getHashString","data","AmaraPluginRouter","DEFAULT_HASH_PARTS","RegExp","selectorWithin","rxValidHash","dispatch","getAncestorRouteParams","current","parentElement","targetParams","get","unshift","getRouteParams","ancestorParams","freeze","concat","removeRouteAttribute","_","el","removeAttribute","clearInvalidHash","lastHash","document","window","history","location","clear","targetRoutes","replaceState","title","pathname","search","setRouteOnTarget","targetRoute","routeData","rxRoute","rxToken","active","tokens","tokenPrefixLength","set","getAttribute","setAttribute","updateMatchingTarget","matches","routes","applyMatchingRoutes","resetTarget","delete","resetInactiveRoute","resetDisconnectedTarget","includes","resetDisconnectedTargets","targets","updateMatchingTargets","hashData","announceChangeOccurred","type","payload","onHashChanged","updateTargetRoute","arr","updateTargetRoutes","byTarget","navigate","findIndex","splice","Map","addEventListener","action","register","add","prototype","toString"],"mappings":"CAAC,SAAUA,EAAQC,GACC,gBAAZC,UAA0C,mBAAXC,QAAyBA,OAAOD,QAAUD,IAC9D,kBAAXG,SAAyBA,OAAOC,IAAMD,OAAOH,GACnDD,EAAOM,YAAcL,KACrBM,KAAM,WA0BR,QAASC,GAAKC,GACV,GAAIC,GAAQH,KAAKI,OAAOF,OACVG,KAAVF,GAA0BD,IAAOF,MAAKM,SACpCN,KAAKM,OAAOJ,GAAOC,GAG7B,QAASI,KAEL,IADA,GAAIC,MAAcC,EAAMC,UAAUC,OAC1BF,KAAQD,EAASC,GAAQC,UAAWD,EAK5C,KAHA,GAAIL,GACAQ,EAAQ,EACRN,EAASO,OAAOC,OAAO,MACpBV,EAASI,EAAQI,MACpBC,OAAOE,KAAKX,GAAQY,QAAQf,GAAOK,OAAQA,EAAQF,OAAQA,GAE/D,OAAOE,GAGX,QAASW,GAAIF,EAAgBG,GAGzB,IAAI,GAFAD,GAAMJ,OAAOC,OAAO,MACpBL,EAAMM,GAAQA,EAAKJ,QAAU,EACzBQ,EAAI,EAAGJ,GAASI,EAAIV,EAAMU,IAC9BF,EAAIF,EAAKI,IAAMD,EAAOC,EAE1B,OAAOF,GAGX,QAASG,GAAQC,EAAcC,GAE3B,IADA,GAAIC,MAAWd,EAAMC,UAAUC,OAAS,EAChCF,KAAQ,GAAIc,EAAMd,GAAQC,UAAWD,EAAM,EAEnD,KACI,MAAOY,GAAGG,MAAMF,EAAKC,GACvB,MAAOE,GACL,MAAOA,IAIf,QAASC,GAAYvB,GACjB,GAAIwB,GAAQC,EAAMC,mBAAmB1B,EACrC,IAAI2B,EAAUC,KAAKH,GACf,MAAO,IAAII,MAAKJ,EACb,IAAIK,EAAOF,KAAKH,GAAM,CAEzB,GADAD,EAASP,EAAQc,KAAKC,MAAOD,KAAMN,GAC/BQ,EAAQC,KAAKV,KAAYW,EAAMC,MAC/B,MAEJ,OAAOZ,GAEX,MAAOC,GAGX,QAASY,GAAMC,GACX,MAAOA,GAAIC,QAAQC,EAAgB,QAGvC,QAASC,GAAQH,GACb,MAAOA,GAAII,MAAMC,OAAO9C,OAG5B,QAAS+C,GAAUN,GACf,MAAOA,GAAIM,UAAUC,OAAOhD,OAYhC,QAASiD,GAAY/C,GACjB,GAAIgD,GAAMlD,KACNmD,EAASD,EAAIC,OACbC,EAAQF,EAAIE,MACZxB,EAAMuB,EAAOjD,GACbmD,EAAMC,mBAAmBpD,GAAO,GACpC,QAAQkC,EAAQC,KAAKT,IACjB,IAAKU,GAAMiB,IACX,IAAKjB,GAAMkB,MACP,MACJ,KAAKlB,GAAMmB,KACP7B,GAAOwB,EAAMM,KAAKJ,mBAAmBpD,GACrC,MACJ,KAAKoC,GAAMqB,MACX,IAAKrB,GAAMzB,OACP,MAAOuC,GAAMM,KAAKL,EAAMC,mBAAmBpB,KAAK0B,UAAUhC,IAC9D,KAAKU,GAAMN,KACP,MAAOoB,GAAMM,KAAKL,EAAMzB,EAAIiC,cAChC,SACI,MAAOT,GAAMM,KAAKL,EAAMC,mBAAmB1B,KAIvD,QAASkC,GAAkBX,OACP,KAAXA,IAAoBA,KAEzB,IAAIY,IAAWZ,OAAQA,EAAQC,SAI/B,OAHAvC,QAAOE,KAAKoC,GACPa,OACAhD,QAAQiC,EAAac,GACnBA,EAAQX,MAAMzC,QAAU,IAAMoD,EAAQX,MAAMa,KAAK,MAAQ,GAGpE,QAASC,GAAgBC,EAAKjB,GAC1B,GAAIhD,GAAMgD,EAAI,GACV/C,EAAQ+C,EAAI,EAEhB,YAFmC,KAAV/C,IAAmBA,EAAQ,QAE7CgE,EAAIjE,GAAOwB,EAAYvB,GAAQgE,EAG1C,QAASC,GAAkBC,EAA0CC,GAEjE,QAASC,GAAYC,GACjB,GAAItB,IAAOsB,EAAKC,MAAMH,QAAsBI,MAAM,GAC9CC,EAASzB,EAAI,GACb0B,EAAM1B,EAAI,OAAiB,KAAR0B,IAAiBA,EAAM,GAC9C,IAAIC,IAASD,EAAIH,MAAMK,QAAiBJ,MAAM,GAC1CK,EAAQF,EAAM,GACdG,EAAKH,EAAM,EAKf,YAL+B,KAAPG,IAAgBA,EAAK,KAKrCL,OAAQA,EAAQI,MAAOA,EAAO5B,OAJzB6B,EAAGnC,MAAM,KACjBoC,IAAIrC,EAAS,KACbsC,OAAOC,GACPC,OAAOlB,OAIhB,QAASmB,GAAYC,GACjB,MAAOA,GACF5C,QAAQ2B,EAAekB,WAAY,IACnC1C,MAAMwB,EAAemB,iBACrBN,OAAOO,SACPR,IAAIV,GAGb,QAASmB,GAAexC,GACpB,GAAIyB,GAASzB,EAAIyB,OACbI,EAAQ7B,EAAI6B,MACZ5B,EAASD,EAAIC,WAAwB,KAAXA,IAAoBA,KAElD,IAAIwC,GAAK7B,EAAkBX,EAC3B,OAAQ,GAAKwB,EAAUN,EAA6B,eAAIU,EAAQY,EAGpE,QAASC,GAAcC,GACnB,MAAOxB,GAAekB,WAAaM,EAC9BZ,IAAIS,GACJzB,KAAKI,EAAemB,iBAG7B,OACIH,YAAaA,EACbO,cAAeA,GAgBvB,QAASE,GAAkBzB,OACC,KAAnBA,IAA4BA,EAA2C0B,EAG5E,IAAIzB,GAAgB,GAAI0B,QAAQ,QAAWxD,EAAM6B,EAAe4B,gBAAmB,QAC/EC,EAAc,GAAIF,SAClB,IAAKxD,EAAM6B,EAAekB,YAC1B,OAAQ/C,EAAM6B,EAAe4B,gBAAiB,mBAC9CzD,EAAM6B,EAAemB,iBAAkB,SACzCvB,KAAK,KAEHf,EAAMkB,EAAkBC,EAAgBC,GACxCe,EAAcnC,EAAImC,YAClBO,EAAgB1C,EAAI0C,aAExB,OAAO,UAAuBO,GAO1B,QAASC,GAAuBzB,GAI5B,IAHA,GACIxB,GADA7C,KAEA+F,EAAU1B,GAAUA,EAAO2B,cACxBD,GACHlD,EAASoD,EAAaC,IAAIH,GACtBlD,GAAU7C,EAAOmG,QAAQtD,GAC7BkD,EAAUA,EAAQC,aAEtB,OAAOhG,GAGX,QAASoG,GAAe/B,GACpB,GAAIgC,GAAiBP,EAAuBzB,GACxCxB,EAASoD,EAAaC,IAAI7B,MAC9B,OAAO9D,QAAO+F,OAAOrG,EAAMiB,UAAM,GAAQmF,EAAeE,QAAS1D,MAGrE,QAAS2D,GAAqBC,EAAGC,GAC7BA,EAAGC,gBAAgB,SAGvB,QAASC,GAAiB5B,GACtB,IAAIY,EAAYnE,KAAKuD,KAAWA,GAAS6B,GAAzC,CAGA,GAAIC,GAAWC,OAAOD,SAClBE,EAAUD,OAAOC,QACjBC,EAAWF,OAAOE,QAGtB,OAFAhB,GAAaiB,QACbC,EAAazG,QAAQ8F,GACdQ,EAAQI,aACX,KACAN,EAASO,MACTJ,EAASK,SAAWL,EAASM,SAIrC,QAASC,GAAiBC,GACtB,GAAI7E,GAAMlD,KACNgH,EAAK9D,EAAI8D,GACTjC,EAAQ7B,EAAI6B,MACZ5B,EAASD,EAAIC,OACb6E,EAAY9E,EAAI8E,UAChBC,EAAU,GAAIjC,QAAO+B,EAAYrF,QAAQwF,EAAS,YACtD,KAAKF,EAAUG,QAAUF,EAAQlG,KAAKgD,GAAQ,CAC1C,GAAI7D,IAAU6D,EAAMN,MAAMwD,QACrBvD,MAAM,GACNO,IAAIvD,GACL0G,GAAUL,EAAYtD,MAAMyD,QAC3BjD,IAAIlC,EAAWsF,EACpBL,GAAUG,QAAS,EACnB5B,EAAa+B,IAAItB,EAAIzG,EAAM4C,EAAQlC,EAAImH,EAAQlH,KAC3C8F,EAAGuB,aAAa,WAAaxD,GAC3BiC,EAAGwB,aAAa,QAASzD,IAIvC,QAAS0D,GAAqBvF,GAC1B,GAAIyB,GAASzB,EAAIyB,OACbI,EAAQ7B,EAAI6B,MACZ5B,EAASD,EAAIC,WAAwB,KAAXA,IAAoBA,KAElD,IAAI0B,GAAQ7E,KACRgH,EAAKnC,EAAMmC,GACXgB,EAAYnD,EAAMmD,SACjBhB,GAAG0B,QAAQ/D,IAChBqD,EAAUW,OAAO3H,QAAQ8G,GAAmBd,GAAIA,EAAIjC,MAAOA,EAAO5B,OAAQA,EAAQ6E,UAAWA,IAGjG,QAASY,GAAoBZ,EAAsChB,GAC/DgB,EAAUG,QAAS,EACnBnI,KAAKgB,QAAQyH,GAAuBzB,GAAIA,EAAIgB,UAAWA,IAG3D,QAASa,GAAYlE,GACjB4B,EAAauC,OAAOnE,GACpBA,EAAOsC,gBAAgB,SAG3B,QAAS8B,GAAmBf,EAAsCrD,IAC7DqD,EAAUG,QAAUU,EAAYlE,GAGrC,QAASqE,GAAwBjC,EAAGpC,GAChC,GAAI3E,KAAKiJ,SAAStE,GAAS,CACvB,GAAIqC,GAAUrC,CACd4B,GAAauC,OAAO9B,GACpBS,EAAaqB,OAAO9B,IAI5B,QAASkC,GAAyBC,GAC9B1B,EAAazG,QAAQgI,EAAyBG,GAGlD,QAASC,GAAsB9D,GAC3B,GAAKY,EAAYnE,KAAKuD,GAAtB,CACA,GAAI+D,GAAWhE,EAAYC,EAC3BmC,GAAazG,QAAQ4H,EAAqBS,GAC1C5B,EAAazG,QAAQ+H,IAGzB,QAASO,GAAuBhE,GAC5B6B,IAAa7B,GAAQa,GACjBoD,KAAM,uBACNC,QAAS,gBAIjB,QAASC,KACL,GAAInE,GAAO+B,OAAOD,SAASG,SAASjC,IACpC4B,GAAiB5B,GACjB8D,EAAsB9D,GACtBgE,EAAuBhE,GACvB6B,EAAW7B,EAGf,QAASoE,GAAkBC,EAA0BhF,GACjD,GAAIgE,IAAoBzF,MAAU2D,OAAOrF,MAAM0B,EAAKyG,EAChDhB,GAAOhI,OACP8G,EAAaa,IAAI3D,GAASgE,OAAQA,EAAQR,QAAQ,KAElDU,EAAYlE,GACZ8C,EAAaqB,OAAOnE,GAExB,IAAIzB,GAGR,QAAS0G,GAAmB/D,GACxBA,EAAK7E,QAAQ0I,GACbD,IAGJ,QAASI,GAAS3G,GAGd,MAFaA,GAAIyB,SAEC7B,OAAO9C,MAG7B,QAAS8J,GAASN,GACd,GAAI7E,GAAS6E,EAAQ7E,OACjB0E,EAAWhE,EAAYgC,OAAOD,SAASG,SAASjC,MAChD1E,EAAQyI,EAASU,UAAUF,EAAUlF,EACzC/D,IAAS,GAAKyI,EAASW,OAAOpJ,EAAO,EAAG4I,IAAYH,EAAS3F,KAAK8F,GAClEnC,OAAOD,SAASG,SAASjC,KAAOM,EAAcyD,GAtJlD,GAAIlC,GAAwB,KAExBM,EAAwD,GAAIwC,KAC5D1D,EAAuD,GAAI0D,IAwJ/D,OAFA5C,QAAO6C,iBAAiB,aAAcT,GAE/B,SAAiBU,GACpB,OAAQA,EAAOZ,MACf,IAAK,iBACDY,EAAOX,QAAQY,SAAS,cAAe1D,EACvC,MACJ,KAAK,4BACDyD,EAAOX,QAAQzE,OAAS6E,EAAmBO,EAAOX,QAAQzE,MAC1D,MACJ,KAAK,oCACDoF,EAAOX,QAAQa,IAAI,QACnB,MACJ,KAAK,yBACDnB,EAAyBiB,EAAOX,QAChC,MACJ,KAAK,kBACDM,EAASK,EAAOX,YA1XhC,GAAI7G,GAAiB,aACjBV,EAAS,mCACTH,EAAY,6CAEZQ,GACAiB,IAAK,gBACLvB,KAAM,gBACNyB,KAAM,mBACNE,MAAO,iBACPpB,MAAO,iBACPiB,MAAO,qBACP3C,OAAQ,mBAGRuB,EAAUvB,OAAOyJ,UAAUC,SAyE3BzF,EAAW,iBACXK,EAAY,SAAUjC,GAGtB,MAFUA,GAAI,IA6FdmF,EAAoB,EACpBH,EAAU,eAEVnC,EAA+ClF,OAAO+F,QACtDrB,WAAY,KACZU,eAAgB,MAChBT,gBAAiB,MAuMrB,OAAOM","file":"amara-plugin-router.umd.min.js"}