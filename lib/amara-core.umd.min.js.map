{"version":3,"sources":["amara-core.umd.js"],"names":["global","factory","exports","module","define","amd","Amara","this","addToDispatchArg","provider","arg","target","applyArgReducer","data","key","prevArgs","info","lastArgs","selector","feature","args","result","changed","Connection","ref","logAccess","prop","set","keyFeatures","get","add","Set","createPropertyDescriptor","obj","getLoggerWrapper","Object","create","keys","reduce","invoke","map","meta","WeakMap","logged","value","undefined","argProviders","forEach","callData","has","params","assign","apply","featureConnections","Map","invoker","bind","clearCache","targets","delete","immediate","fn","resolved","then","attempt","len","arguments","length","e","throwError","message","Error","getAction","type","payload","overEvery","fns","item","index","debounce","method","scheduler","called","createEmptySetForKey","isAlsoTrue","predicate","every","predicates","context","isNonEmptyString","trim","validate","Array","isArray","validateConfig","callback","copy","sort","sorter","a","b","addToMap","arr","middleware","dispatch","action","interceptor","interceptors","createInterceptor","mw","register","paramProvider","setDefaults","id","featureCount","processFeatureTargets","size","enqueueApply","addFeatureToMap","onChangeOccurred","changedKeys","scheduleKeyChangeHandler","onFeaturesAdded","added","addAndConnectFeature","onEnqueueApply","items","onClearFeatureTargetsCache","connection","handler","isAllowed","filters","helpers","targetSet","applyQueue","scheduleQueueFlush","invokeConnection","masterSort","sorters","byId","sortByKeys","from","isChanged","getValue","mapOrRemoveUnchanged","results","some","prune","targetResults","removeUnchangedResults","bootstrapped","addedFeatures","features","concat","createFeatureConnection","prototype","push","clear","setTimeout","scheduleBootstrap","scheduleFeaturesAdded","api","bootstrap","includes","config","Promise","resolve"],"mappings":"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","file":"amara-core.umd.min.js"}